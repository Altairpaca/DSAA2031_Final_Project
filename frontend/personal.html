<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Personal Page</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Personal Information</h1>
    <div id="userInfo"></div>
    <h2>Your Projects</h2>
    <div id="projects"></div>
  </div>
  
  <script>
    // 从 localStorage 获取用户信息
    const userId = localStorage.getItem('userId');
    const userName = localStorage.getItem('userName');
    const role = localStorage.getItem('role');
    
    const userInfoDiv = document.getElementById('userInfo');
    userInfoDiv.textContent = `Logged in as ${role}: ${userName} (ID: ${userId})`;
    
    // 调用项目API获取数据
    fetch(`http://localhost:3000/api/projects?userId=${userId}`)
      .then(response => response.json())
      .then(data => {
        if(data.success) {
          const projectsDiv = document.getElementById('projects');
          if(data.projects.length === 0) {
            projectsDiv.textContent = "No projects found.";
          } else {
            // 显示项目列表
            data.projects.forEach(project => {
              const p = document.createElement('p');
              p.textContent = `${project.projectName}: ${project.description}`;
              projectsDiv.appendChild(p);
            });
          }
        } else {
          console.error("Failed to retrieve projects:", data.message);
        }
      })
      .catch(error => console.error("Error fetching projects:", error));
  </script>
</body>
</html>